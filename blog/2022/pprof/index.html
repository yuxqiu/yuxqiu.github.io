<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta name="view-transition" content="same-origin"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="author" content="Yuxiang Qiu"> <title>How to use gperftools with pprof in OSX | Yuxiang Qiu</title> <meta name="generator" content="Jekyll v4.4.1"> <meta property="og:title" content="How to use gperftools with pprof in OSX"> <meta property="og:locale" content="en"> <meta name="description" content="What is gperftools (and How to use it)"> <meta property="og:description" content="What is gperftools (and How to use it)"> <link rel="canonical" href="https://yuxqiu.github.io/blog/2022/pprof/"> <meta property="og:url" content="https://yuxqiu.github.io/blog/2022/pprof/"> <meta property="og:site_name" content="Yuxiang Qiu"> <meta property="og:image" content="https://yuxqiu.github.io/assets/img/og/posts/pprof.png"> <meta property="og:image:height" content="600"> <meta property="og:image:width" content="1200"> <meta property="og:image:alt" content="How to use gperftools with pprof in OSX"> <meta property="og:type" content="article"> <meta property="article:published_time" content="2022-11-13T12:07:51+00:00"> <meta name="twitter:card" content="summary_large_image"> <meta property="twitter:image" content="https://yuxqiu.github.io/assets/img/og/posts/pprof.png"> <meta name="twitter:image:alt" content="How to use gperftools with pprof in OSX"> <meta property="twitter:title" content="How to use gperftools with pprof in OSX"> <meta name="twitter:site" content="@yuxqiu"> <meta name="google-site-verification" content="OyP7PF7v8xjEbPqbdYaMosljunIcAOjdw_C6-TtA8f0"> <meta name="msvalidate.01" content="231286930EDC7A744F88D1D05B1BD04A"> <script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-02-18T14:33:14+00:00","datePublished":"2022-11-13T12:07:51+00:00","description":"What is gperftools (and How to use it)","headline":"How to use gperftools with pprof in OSX","image":{"width":1200,"height":600,"alt":"How to use gperftools with pprof in OSX","url":"https://yuxqiu.github.io/assets/img/og/posts/pprof.png","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://yuxqiu.github.io/blog/2022/pprof/"},"url":"https://yuxqiu.github.io/blog/2022/pprof/"}</script> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://yuxqiu.github.io/blog/2022/pprof/"> <script src="/assets/js/theme.js?a5ca4084d3b81624bcfa01156dae2b8e"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class=" "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm sticky-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> Yuxiang Qiu </a> <input type="checkbox" id="navbar-toggler-checkbox" class="navbar-toggler-checkbox" hidden> <label for="navbar-toggler-checkbox" class="navbar-toggler ml-auto"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </label> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <svg id="light-toggle-system" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M9.173 14.83a4 4 0 1 1 5.657 -5.657"></path><path d="M11.294 12.707l.174 .247a7.5 7.5 0 0 0 8.845 2.492a9 9 0 0 1 -14.671 2.914"></path><path d="M3 12h1"></path><path d="M12 3v1"></path><path d="M5.6 5.6l.7 .7"></path><path d="M3 21l18 -18"></path></svg> <svg id="light-toggle-dark" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" fill="currentColor"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 1.992a10 10 0 1 0 9.236 13.838c.341 -.82 -.476 -1.644 -1.298 -1.31a6.5 6.5 0 0 1 -6.864 -10.787l.077 -.08c.551 -.63 .113 -1.653 -.758 -1.653h-.266l-.068 -.006l-.06 -.002z"></path></svg> <svg id="light-toggle-light" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" fill="currentColor"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 19a1 1 0 0 1 .993 .883l.007 .117v1a1 1 0 0 1 -1.993 .117l-.007 -.117v-1a1 1 0 0 1 1 -1z"></path><path d="M18.313 16.91l.094 .083l.7 .7a1 1 0 0 1 -1.32 1.497l-.094 -.083l-.7 -.7a1 1 0 0 1 1.218 -1.567l.102 .07z"></path><path d="M7.007 16.993a1 1 0 0 1 .083 1.32l-.083 .094l-.7 .7a1 1 0 0 1 -1.497 -1.32l.083 -.094l.7 -.7a1 1 0 0 1 1.414 0z"></path><path d="M4 11a1 1 0 0 1 .117 1.993l-.117 .007h-1a1 1 0 0 1 -.117 -1.993l.117 -.007h1z"></path><path d="M21 11a1 1 0 0 1 .117 1.993l-.117 .007h-1a1 1 0 0 1 -.117 -1.993l.117 -.007h1z"></path><path d="M6.213 4.81l.094 .083l.7 .7a1 1 0 0 1 -1.32 1.497l-.094 -.083l-.7 -.7a1 1 0 0 1 1.217 -1.567l.102 .07z"></path><path d="M19.107 4.893a1 1 0 0 1 .083 1.32l-.083 .094l-.7 .7a1 1 0 0 1 -1.497 -1.32l.083 -.094l.7 -.7a1 1 0 0 1 1.414 0z"></path><path d="M12 2a1 1 0 0 1 .993 .883l.007 .117v1a1 1 0 0 1 -1.993 .117l-.007 -.117v-1a1 1 0 0 1 1 -1z"></path><path d="M12 7a5 5 0 1 1 -4.995 5.217l-.005 -.217l.005 -.217a5 5 0 0 1 4.995 -4.783z"></path></svg> </button> </li> </ul> </div> </div> </nav> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">How to use gperftools with pprof in OSX</h1> </header> <article class="post-content"> <div id="markdown-content"> <h2 id="what-is-gperftools-and-how-to-use-it">What is gperftools (and How to use it)</h2> <blockquote> <p>See <a href="https://gperftools.github.io/gperftools/cpuprofile.html" rel="external nofollow noopener" target="_blank">https://gperftools.github.io/gperftools/cpuprofile.html</a></p> </blockquote> <h2 id="gperftools-in-osx">gperftools in OSX</h2> <p>In MacOS, gperftools can be installed via HomeBrew with <code class="language-plaintext highlighter-rouge">brew install gperftools</code>.</p> <h2 id="how-to-use-pprof-to-generate-report">How to use pprof to generate report</h2> <p>By following the instructions described in the link above, profiler output can be generated. However, we could not directly use pprof shipped with HomeBrew or gpertools (installed via HomeBrew). Otherwise, you will encounter problems described <a href="https://github.com/gperftools/gperftools/issues/1292" rel="external nofollow noopener" target="_blank">in this issue</a>.</p> <p>To solve this problem, we need to use <a href="https://github.com/google/pprof" rel="external nofollow noopener" target="_blank">pprof provided by Google</a>. To install it, follow the instructions on its README.</p> <p>After installing pprof, if you want to generate graphs, install graphviz via HomeBrew: <code class="language-plaintext highlighter-rouge">brew install graphviz</code>.</p> <p>Now, gpertools and pprof are ready to use.</p> <h2 id="understanding-the-graph">Understanding the Graph</h2> <p>To understand the meaning of the graph (generated with options like <code class="language-plaintext highlighter-rouge">--png</code>, <code class="language-plaintext highlighter-rouge">--gif</code>, <code class="language-plaintext highlighter-rouge">--pdf</code>…), we can see the <a href="https://github.com/google/pprof/blob/main/doc/README.md#:~:text=location%20per%20line.-,Graphical,-reports" rel="external nofollow noopener" target="_blank">Graphical reports</a> section in pprof documentation.</p> </div> </article> </div> </div> <footer class="sticky-bottom" role="contentinfo"> <div class="post-version"> © 2025 <a href="/">Yuxiang Qiu</a> <br> v25-02-18 | <a href="https://github.com/yuxqiu/yuxqiu.github.io/commit/164661fe14bea1e047a15eeaa5ed3429c0d08a3e" rel="external nofollow noopener" target="_blank">164661f</a> </div> </footer> </body> </html>