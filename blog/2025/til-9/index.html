<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="author" content="Yuxiang Qiu"> <title>TIL: Rust fallthrough, How Let’s Encrypt Works, s1 | Yuxiang Qiu</title> <meta name="generator" content="Jekyll v4.4.1"> <meta property="og:title" content="TIL: Rust fallthrough, How Let’s Encrypt Works, s1"> <meta property="og:locale" content="en"> <meta name="description" content="Fallthrough"> <meta property="og:description" content="Fallthrough"> <link rel="canonical" href="https://yuxqiu.github.io/blog/2025/til-9/"> <meta property="og:url" content="https://yuxqiu.github.io/blog/2025/til-9/"> <meta property="og:site_name" content="Yuxiang Qiu"> <meta property="og:image" content="https://yuxqiu.github.io/assets/img/og/posts/til-9.png"> <meta property="og:image:height" content="600"> <meta property="og:image:width" content="1200"> <meta property="og:image:alt" content="TIL: Rust fallthrough, How Let's Encrypt Works, s1"> <meta property="og:type" content="article"> <meta property="article:published_time" content="2025-03-06T13:44:19+00:00"> <meta name="twitter:card" content="summary_large_image"> <meta property="twitter:image" content="https://yuxqiu.github.io/assets/img/og/posts/til-9.png"> <meta name="twitter:image:alt" content="TIL: Rust fallthrough, How Let's Encrypt Works, s1"> <meta property="twitter:title" content="TIL: Rust fallthrough, How Let’s Encrypt Works, s1"> <meta name="twitter:site" content="@yuxqiu"> <meta name="google-site-verification" content="OyP7PF7v8xjEbPqbdYaMosljunIcAOjdw_C6-TtA8f0"> <meta name="msvalidate.01" content="231286930EDC7A744F88D1D05B1BD04A"> <script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-03-07T00:31:13+00:00","datePublished":"2025-03-06T13:44:19+00:00","description":"Fallthrough","headline":"TIL: Rust fallthrough, How Let’s Encrypt Works, s1","image":{"width":1200,"height":600,"alt":"TIL: Rust fallthrough, How Let's Encrypt Works, s1","url":"https://yuxqiu.github.io/assets/img/og/posts/til-9.png","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://yuxqiu.github.io/blog/2025/til-9/"},"url":"https://yuxqiu.github.io/blog/2025/til-9/"}</script> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://yuxqiu.github.io/blog/2025/til-9/"> <script src="/assets/js/theme.js?a5ca4084d3b81624bcfa01156dae2b8e"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class=" "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm sticky-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> Yuxiang Qiu </a> <input type="checkbox" id="navbar-toggler-checkbox" class="navbar-toggler-checkbox" hidden> <label for="navbar-toggler-checkbox" class="navbar-toggler ml-auto"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </label> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <svg id="light-toggle-system" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M9.173 14.83a4 4 0 1 1 5.657 -5.657"></path><path d="M11.294 12.707l.174 .247a7.5 7.5 0 0 0 8.845 2.492a9 9 0 0 1 -14.671 2.914"></path><path d="M3 12h1"></path><path d="M12 3v1"></path><path d="M5.6 5.6l.7 .7"></path><path d="M3 21l18 -18"></path></svg> <svg id="light-toggle-dark" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" fill="currentColor"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 1.992a10 10 0 1 0 9.236 13.838c.341 -.82 -.476 -1.644 -1.298 -1.31a6.5 6.5 0 0 1 -6.864 -10.787l.077 -.08c.551 -.63 .113 -1.653 -.758 -1.653h-.266l-.068 -.006l-.06 -.002z"></path></svg> <svg id="light-toggle-light" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" fill="currentColor"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 19a1 1 0 0 1 .993 .883l.007 .117v1a1 1 0 0 1 -1.993 .117l-.007 -.117v-1a1 1 0 0 1 1 -1z"></path><path d="M18.313 16.91l.094 .083l.7 .7a1 1 0 0 1 -1.32 1.497l-.094 -.083l-.7 -.7a1 1 0 0 1 1.218 -1.567l.102 .07z"></path><path d="M7.007 16.993a1 1 0 0 1 .083 1.32l-.083 .094l-.7 .7a1 1 0 0 1 -1.497 -1.32l.083 -.094l.7 -.7a1 1 0 0 1 1.414 0z"></path><path d="M4 11a1 1 0 0 1 .117 1.993l-.117 .007h-1a1 1 0 0 1 -.117 -1.993l.117 -.007h1z"></path><path d="M21 11a1 1 0 0 1 .117 1.993l-.117 .007h-1a1 1 0 0 1 -.117 -1.993l.117 -.007h1z"></path><path d="M6.213 4.81l.094 .083l.7 .7a1 1 0 0 1 -1.32 1.497l-.094 -.083l-.7 -.7a1 1 0 0 1 1.217 -1.567l.102 .07z"></path><path d="M19.107 4.893a1 1 0 0 1 .083 1.32l-.083 .094l-.7 .7a1 1 0 0 1 -1.497 -1.32l.083 -.094l.7 -.7a1 1 0 0 1 1.414 0z"></path><path d="M12 2a1 1 0 0 1 .993 .883l.007 .117v1a1 1 0 0 1 -1.993 .117l-.007 -.117v-1a1 1 0 0 1 1 -1z"></path><path d="M12 7a5 5 0 1 1 -4.995 5.217l-.005 -.217l.005 -.217a5 5 0 0 1 4.995 -4.783z"></path></svg> </button> </li> </ul> </div> </div> </nav> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">TIL: Rust fallthrough, How Let's Encrypt Works, s1</h1> </header> <article class="post-content"> <hr> <div id="table-of-contents"> <ul id="toc" class="section-nav"> <li class="toc-entry toc-h2"><a href="#fallthrough">Fallthrough</a></li> <li class="toc-entry toc-h2"><a href="#how-lets-encrypt-works">How Let’s Encrypt Works</a></li> <li class="toc-entry toc-h2"><a href="#s1">s1</a></li> </ul> </div> <hr> <div id="markdown-content"> <h2 id="fallthrough">Fallthrough</h2> <ul> <li><a href="https://huonw.github.io/blog/2025/03/rust-fallthrough/" rel="external nofollow noopener" target="_blank">Take a break: Rust match has fallthrough</a></li> </ul> <p>It’s a very interesting piece of work. I learned how to convert any fallthrough, which is common in switch-case-like construct in C, (or, more generally, how to convert any DAG of C <code class="language-plaintext highlighter-rouge">goto</code>) to Rust. As the author didn’t provide any benchmark (and hinted the readers to benchmark it themselves), I decided to take a look. The benchmark is <a href="https://github.com/yuxqiu/toys/tree/main/2025-03-06-rust-fallthrough" rel="external nofollow noopener" target="_blank">here</a>.</p> <p>While this trick is fun, benchmark results show that it performs similarly to the if version with or without inlining:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>break_version           time:   [33.657 ns 33.782 ns 33.900 ns]
if_version              time:   [31.681 ns 31.828 ns 31.987 ns]

break_version_inline    time:   [29.289 ns 29.407 ns 29.516 ns]
if_version_inline       time:   [29.025 ns 29.135 ns 29.227 ns]

break_version_noblackbox
                        time:   [4.2127 ns 4.2280 ns 4.2448 ns]
if_version_noblackbox   time:   [4.0954 ns 4.1053 ns 4.1147 ns]

break_version_inline_noblackbox
                        time:   [650.55 ps 652.54 ps 654.39 ps]
if_version_inline_noblackbox
                        time:   [477.84 ps 479.68 ps 481.54 ps]
</code></pre></div></div> <p>One interesting observation in the above benchmarks that may encourage you to continue using the <code class="language-plaintext highlighter-rouge">if</code> version is that the <code class="language-plaintext highlighter-rouge">if</code> version performs better than the jump table version when constant propagation is possible.</p> <p>Out of curiosity, I take a look at <a href="https://play.rust-lang.org/?version=stable&amp;mode=release&amp;edition=2024&amp;gist=d55f8240a0656ef2d5540c9972ac1ac5" rel="external nofollow noopener" target="_blank">the generated assembly for non-inline version</a> (select ASM in the top left) under release build. Surprisingly, they are exactly the same.</p> <p>So for now I guess it’s just a simple fancy trick that you can just play around with. But maybe in the future we’ll have an optimization pass for this pattern.</p> <h2 id="how-lets-encrypt-works">How Let’s Encrypt Works</h2> <ul> <li><a href="https://letsencrypt.org/how-it-works/" rel="external nofollow noopener" target="_blank">Let’s Encrypt - How It Works</a></li> </ul> <p>The following two diagrams summarize how Let’s Encrypt works.</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/blog/2025/03/domain-verification-480.webp 480w,/assets/img/blog/2025/03/domain-verification-800.webp 800w,/assets/img/blog/2025/03/domain-verification-1400.webp 1400w," sizes="(max-width: 600px) 100vw, (max-width: 1200px) 80vw, 66vw" type="image/webp"></source> <img src="/assets/img/blog/2025/03/domain-verification.png" width="100%" height="auto" alt="domain-validation" loading="lazy"> </picture> <figcaption class="caption"><p>First, the domain owner needs to verify the ownership of the domain and signs a nonce with some <code class="language-plaintext highlighter-rouge">sk1</code> that the owner has. After successful verification, CA will trust the public key <code class="language-plaintext highlighter-rouge">pk1</code> associated with <code class="language-plaintext highlighter-rouge">sk1</code>.</p> </figcaption> </figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/blog/2025/03/certificate-issuance-480.webp 480w,/assets/img/blog/2025/03/certificate-issuance-800.webp 800w,/assets/img/blog/2025/03/certificate-issuance-1400.webp 1400w," sizes="(max-width: 600px) 100vw, (max-width: 1200px) 80vw, 66vw" type="image/webp"></source> <img src="/assets/img/blog/2025/03/certificate-issuance.png" width="100%" height="auto" alt="certificate-issuance" loading="lazy"> </picture> <figcaption class="caption"><p>To obtain a certificate, an agent can construct a Certificate Signing Request (CSR) to ask CA to issue a certificate for a domain with public key pair <code class="language-plaintext highlighter-rouge">pk2</code>. CSR includes a signature by <code class="language-plaintext highlighter-rouge">sk2</code> and needs to be signed by sk (e.g., <code class="language-plaintext highlighter-rouge">sk1</code>) associated with the pk (e.g., <code class="language-plaintext highlighter-rouge">pk1</code>) of this domain (so that CA knows the agent is authorized for this domain).</p> </figcaption> </figure> <p>A question came to mind as I drafted this blog. Why do we need a signature by <code class="language-plaintext highlighter-rouge">sk2</code>? This is addressed by <a href="https://datatracker.ietf.org/doc/html/rfc2986#section-3" rel="external nofollow noopener" target="_blank">PKCS #10: Certification Request Syntax Specification Version 1.7, Section 3, Note 2</a>.</p> <blockquote> <p>Note 2 - The signature on the certification request prevents an entity from requesting a certificate with another party’s public key. Such an attack would give the entity the minor ability to pretend to be the originator of any message signed by the other party. This attack is significant only if the entity does not know the message being signed and the signed part of the message does not identify the signer. The entity would still not be able to decrypt messages intended for the other party, of course.</p> </blockquote> <h2 id="s1">s1</h2> <ul> <li><a href="https://arxiv.org/abs/2501.19393" rel="external nofollow noopener" target="_blank">s1: Simple test-time scaling</a></li> </ul> <p>After following the project for a long time, I finally decided to take a look at the paper.</p> <p>Budget forcing is indeed interesting based on the evaluation of the s1. But after taking a look at the latest s1.1 result, I notice that the model achieves the same pass@1 even without test-time scaling on some benchmark. SI think there are a couple other questions worth exploring</p> <ul> <li>Why does budget forcing only improve performance in some cases?</li> <li>Is budget forcing really useful when fine-tuning a model based on high-quality inference data (as in the case of s1.1)?</li> <li>What happens if we use budget forcing in reasoning model?</li> </ul> <p>In addition, the authors compared budget forcing with other prompting techniques. When s1 was explicitly prompted to think for short or long periods of time, it performed worse than when the question was asked directly (without budget forcing). Why this is the case is worth exploring. More broadly, I think it is unclear right now how prompting might affect the performance of reasoning models.</p> <p>With respect to generalizability, <a href="https://github.com/simplescaling/s1/issues/45" rel="external nofollow noopener" target="_blank">it was noted</a> that the base model used to fine-tune s1 has already established some reasoning capability (when using budget forcing). Thus, a natural question is whether this technique can be replicated to other models of the same size that does not establish the reasoning capability?</p> <ul> <li>A <a href="https://arxiv.org/abs/2503.01307" rel="external nofollow noopener" target="_blank">recent paper</a> about cognitive behaviors that enable self-improving reasoning might shed some lights on this question.</li> </ul> </div> </article> </div> </div> <footer class="sticky-bottom" role="contentinfo"> <div class="post-version"> © 2025 <a href="/">Yuxiang Qiu</a> <br> v25-03-07 | <a href="https://github.com/yuxqiu/yuxqiu.github.io/commit/a775d27c57ebef19da92a3bebdec6476c23b7c00" rel="external nofollow noopener" target="_blank">a775d27</a> </div> </footer> </body> </html>